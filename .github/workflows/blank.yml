name: Phase 3 â€“ Failure Normalization Matrix

on:
  push:
    branches: [ main ]

jobs:
  missing-file:
    runs-on: ubuntu-latest
    continue-on-error: true
    steps:
      - run: pip install -r requirements.txt

  module-not-found:
    runs-on: ubuntu-latest
    continue-on-error: true
    steps:
      - run: python -c "import totally_fake_module"

  cannot-import:
    runs-on: ubuntu-latest
    continue-on-error: true
    steps:
      - run: |
          python - <<EOF
          from math import does_not_exist
          EOF

  syntax-error:
    runs-on: ubuntu-latest
    continue-on-error: true
    steps:
      - run: |
          python - <<EOF
          def broken_function(
              print("oops")
          EOF

  assertion-failure:
    runs-on: ubuntu-latest
    continue-on-error: true
    steps:
      - run: |
          python - <<EOF
          assert 2 + 2 == 5
          EOF

  missing-env:
    runs-on: ubuntu-latest
    continue-on-error: true
    steps:
      - run: |
          python - <<EOF
          import os
          os.environ["SECRET_KEY"]
          EOF

  timeout:
    runs-on: ubuntu-latest
    continue-on-error: true
    steps:
      - run: |
          timeout 5 sleep 300

  connection-refused:
    runs-on: ubuntu-latest
    continue-on-error: true
    steps:
      - run: curl http://localhost:9999
